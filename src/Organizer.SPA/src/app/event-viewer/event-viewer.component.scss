@use "../variable.scss" as *;

// ============================================
// Event Viewer Component
// ============================================

// --- Base Event ---
.event {
  position: relative;
  width: 100%;
  @include font-primary;
  @include flex-center;
  overflow: hidden;
  -webkit-touch-callout: none; // Prevent iOS callout on long press
  -webkit-user-select: none;
  user-select: none;

  &:hover {
    opacity: 0.7;
  }
}

// --- Event Size Variants ---
.event-year {
  font-size: $event-font-size-year;
  height: $event-height-year;
}

.event-month {
  font-size: $event-font-size-month-mobile;
  height: $event-height-month-mobile;
  min-height: 1rem;
}

@media (min-width: $breakpoint-tablet) {
  .event-month {
    font-size: $event-font-size-month;
    height: $event-height-month;
    min-height: unset;
  }
}

// --- Event Badges ---
.travel-badge {
  position: absolute;
  top: 0.0625rem;
  right: 0.0625rem;
  background-color: red;
  width: 0.25rem;
  height: 0.25rem;
  border: 0.0625rem solid #fff;
}

.project-badge {
  position: absolute;
  height: 0.4375rem;
  width: 0.4375rem;
  left: 0;
  bottom: 0;
  clip-path: polygon(0 0, 0 100%, 100% 100%);
}

// --- Event States ---
.not-confirmed {
  border: 0.075rem solid #fbff00;
  box-sizing: border-box;
  box-shadow: inset 0.0125rem 0.0125rem 0.1875rem 0 rgb(71, 67, 67);
}

.warning {
  border: 0.08125rem solid red;
  box-sizing: border-box;
  box-shadow: inset 0.0125rem 0.0125rem 0.1875rem 0 rgb(71, 67, 67);
}

.billable {
  font-weight: bold;
}

// --- Selected Appointment (removes conflicting borders) ---
.selected-appointment {
  position: relative;

  &.not-confirmed,
  &.warning {
    border: none;
    box-shadow: none;
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border: 0.1875rem solid var(--selection-color, #0288d1);
    pointer-events: none;
    box-sizing: border-box;
    z-index: 1;
  }
}

// --- Availability Bar ---
.availability {
  position: absolute;
  top: 0;
  height: 0.1875rem;
  width: 100%;
  border-bottom: 0.0625rem solid rgb(138, 127, 127);
}

// --- Upstream Styling ---
.upstream-year {
  text-decoration: underline;
  font-size: 0.4375rem !important;
}

.upstream-month {
  text-decoration: underline;
  font-size: $event-font-size-month !important;
}

.upstream-matched {
  text-decoration: underline;
}

// --- Calendar Fallback (if needed) ---
.calendar {
  position: relative;
  width: 100%;
  @include font-primary;
  @include flex-center;
  overflow: hidden;
  color: #fff;
  background-color: rgb(51, 71, 255);
}